tau.mashups.addModule("CustomUnitColoredCustomField/config", [
    {
        "name": "Favorite Fruit",
        "colors": {
            "Apple": "red",
            "Pear": "#007f00",
            "Plum": "rgb(128, 0, 128)"
        }
    },
    {
        "name": "Your Corps",
        "colors": {
            "Green Lanterns": "green",
            "Red Lanterns": "#7f0000",
            "Sinestro Corps": "rgb(128, 128, 0)"
        }
    }
]);
!function(){var e={},t=function(){var t,n,r,o=Array.prototype.slice.call(arguments,0);"string"==typeof o[0]?(r=o[0],t=o[1],n=o[2]):Array.isArray(o[0])&&(t=o[0],n=o[1]);var a=t.reduce(function(e,t){return e.addDependency(t)},tau.mashups);return a=a.addDependency(r+"/config"),a=a.addMashup(function(){var o=Array.prototype.slice.call(arguments,0);if(t.length>0&&1===o.length)throw new Error("Can't properly load dependencies for mashup \""+r+'", mashup is stopped.');return e.variables=o[o.length-1],o.length-t.length===2?e.config=o[o.length-2]:e.config={},Object.freeze&&(Object.freeze(e.variables),Object.freeze(e.config),Object.freeze(e)),n.apply(null,o)})};t("CustomUnitColoredCustomField",["tau/models/board.customize.units/const.customField.types","tau/configurator","jQuery","Underscore","tau/models/board.customize.units/const.entity.types.names","tau/models/board.customize.units/const.card.sizes","tau/models/board.customize.units/board.customize.units.interaction"],function(t,n,r,o,a,u,i){return function(t){function n(e){if(r[e])return r[e].exports;var o=r[e]={exports:{},id:e,loaded:!1};return t[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var r={};return n.m=t,n.c=r,n.p="",n.p=e.variables?e.variables.mashupPath:n.p,n(0)}([function(e,t,n){e.exports=n(2)},,function(t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0})}var u=r(4),i=o(u),s=r(9),c=o(s),d=r(7),l=o(d),f=r(3),p=o(f),g=r(13),m=r(14),v=o(m),y=e.config,b=i["default"].customUnits,h=function(e){var t,n=(t={},a(t,p["default"].TEXT,"text"),a(t,p["default"].NUMBER,"number"),a(t,p["default"].MONEY,"money"),a(t,p["default"].DATE,"date"),a(t,p["default"].DROP_DOWN,"dropdown"),t)[e.type.toLowerCase()];return n?"customField."+n+".editor":null},x=function(e,t){return t?e.colors[t.value]:null},E=function(e){return e?e.value:""},A=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],C=function(e){return isNaN(e)?"00":A[(e-e%16)/16]+A[e%16]},T=function(e){return e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),C(e[1])+C(e[2])+C(e[3])},O=function(e,t){if("#"===e[0]&&(e=e.slice(1)),!e.match(/^[0-9a-f]{6}$/i)){var n=l["default"]("<span />").css("color",e).css("color");e=T(n)}var r=parseInt(e,16),o=r>>16,a=r>>8&255,u=255&r,i=1-t+o/255*t,s=1-t+a/255*t,c=1-t+u/255*t;return"rgb("+[Math.ceil(255*i),Math.ceil(255*s),Math.ceil(255*c)].join(", ")+")"};y.forEach(function(e){var t=e.name,n="colored_custom_field_"+c["default"].underscored(t);b.add({name:t,id:n,classId:"tau-board-unit_type_custom_field_100",hideIf:function(e){return!E(e[n])},template:{markup:[v["default"]],customFunctions:{id:n,getColor:function(t){return t?x(e,t):"#000000"},getBackgroundColor:function(t){var n=x(e,t);return n?O(n,.3):"#ebebeb"},getValue:E}},sampleData:a({},n,{value:c["default"].keys(e.colors)[0]||"Value"}),model:""+n+':CustomValues.Get("'+t+'")',interactionConfig:{isEditable:function(e){var t=e.data[n];return t&&t.type&&!t.calculationModel&&h(t)},handler:function(e,t){var r=e.cardDataForUnit[n],o=g.openUnitEditor(h(r),{});return e.cardDataForUnit.cf=e.cardDataForUnit[n],o(e,t)}}})})},function(e,n){e.exports=t},function(e,t,n){"use strict";var r=n(5),o=n(8),a=n(10);e.exports={addBusListener:o.addBusListener,addBusListenerOnce:o.addBusListenerOnce,getAppConfigurator:r.getAppConfigurator,configurator:r,events:o,customUnits:a}},function(e,t,n){"use strict";var r=n(6),o=n(7),a=new o.Deferred;r.getGlobalBus().once("configurator.ready",function(e,t){a.resolve(t)});var u=function(){return a.promise()};e.exports={getAppConfigurator:u}},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t,n){"use strict";var r=n(6),o=n(9),a=r.getBusRegistry(),u=function(e){return function(){e.apply(null,o.rest(o.toArray(arguments)))}},i=function(e,t,n,r){a.on("create",u(function(o){var a=o.bus;a.name===e&&a[r?"once":"on"](t,n)})),a.on("destroy",u(function(r){var o=r.bus;o.name===e&&o.removeListener(t,n)}))},s=function(e,t,n){i(e,t,n,!0)};e.exports={addBusListener:i,addBusListenerOnce:s}},function(e,t){e.exports=o},function(e,t,n){"use strict";var r=n(9),o=n(11),a=n(12),u=n(5),i=function(e){return e=r.defaults({},e,{types:[o.BUG,o.BUILD,o.EPIC,o.FEATURE,o.IMPEDIMENT,o.ITERATION,o.PROGRAM,o.PROJECT,o.RELEASE,o.REQUEST,o.TASK,o.TEAM_ITERATION,o.TEST_CASE,o.TEST_PLAN,o.TEST_PLAN_RUN,o.STORY],sizes:[a.XS,a.S,a.M,a.L,a.XL,a.LIST]}),u.getAppConfigurator().then(function(t){var n=t.getUnitsRegistry();r.extend(n.units,n.register([e]))})};e.exports={types:o,sizes:a,add:i}},function(e,t){e.exports=a},function(e,t){e.exports=u},function(e,t){e.exports=i},function(e,t){e.exports='<div class=tau-board-unit__value><span class=tau-entity-icon style="color: <%= fn.getColor(this.data[fn.id]) %>; background-color: <%= fn.getBackgroundColor(this.data[fn.id]) %>; text-transform: none"><%= fn.getValue(this.data[fn.id]) %></span></div>'}])})}();
